<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="doc2go">
    <link href="../../../../_/css/main.css" rel="stylesheet" />
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/icons/favicon-16x16.png">
    <link rel="shortcut icon" href="../../../../_/icons/favicon.ico"><title>txtar</title>
</head>
  <body>
    <nav>
        <a href="../../..">go.astrophena.name</a>/<a href="../..">tools</a>/<a href="..">internal</a>/txtar<span class="navbar-right">
          <a href="../../../..">Root</a> | <a href="#pkg-index">Index</a></span>
      </nav>
    <main><h2 id="pkg-overview">package txtar</h2>
<pre class="chroma"><span class="kn">import</span> <span class="s">&#34;go.astrophena.name/tools/internal/txtar&#34;</span></pre>
<p>Package txtar implements a trivial text-based file archive format.
<p>The goals for the format are:
<ul>
<li>be trivial enough to create and edit by hand.
<li>be able to store trees of text files describing go command test cases.
<li>diff nicely in git history and code reviews.
</ul>
<p>Non-goals include being a completely general archive format,
storing binary data, storing file modes, storing special files like
symbolic links, and so on.
<h3 id="hdr-Txtar_format">Txtar format</h3>
<p>A txtar archive is zero or more comment lines and then a sequence of file entries.
Each file entry begins with a file marker line of the form &quot;-- FILENAME --&quot;
and is followed by zero or more file content lines making up the file data.
The comment or file content ends at the next file marker line.
The file marker line must begin with the three-byte sequence &quot;-- &quot;
and end with the three-byte sequence &quot; --&quot;, but the enclosed
file name can be surrounding by additional white space,
all of which is stripped.
<p>If the txtar file is missing a trailing newline on the final line,
parsers should consider a final newline to be present anyway.
<p>There are no possible syntax errors in a txtar archive.
<h3 id="pkg-index">Index</h3>
<ul>
  <li><a href="#Extract">func Extract(a *Archive, dir string) error</a></li>
  <li><a href="#Format">func Format(a *Archive) []byte</a></li>
  <li>
      <a href="#Archive">type Archive</a>
      <ul>
          <li><a href="#FromDir">func FromDir(dir string) (*Archive, error)</a></li>
          <li><a href="#Parse">func Parse(data []byte) *Archive</a></li>
          <li><a href="#ParseFile">func ParseFile(file string) (*Archive, error)</a></li>
          </ul>
      </li>
  <li>
      <a href="#File">type File</a>
      </li>
  </ul><h3 id="pkg-functions">Functions</h3>
  <h3 id="Extract">func Extract</h3>
    <pre class="chroma"><span class="kd">func</span> <span class="nf">Extract</span><span class="p">(</span><span class="nx">a</span> <span class="o">*</span><a href="#Archive"><span class="nx">Archive</span></a><span class="p">,</span> <span class="nx">dir</span> <a href="https://pkg.go.dev/builtin#string"><span class="kt">string</span></a><span class="p">)</span> <a href="https://pkg.go.dev/builtin#error"><span class="kt">error</span></a></pre>
    <p>Extract extracts an archive to dir.
<h3 id="Format">func Format</h3>
    <pre class="chroma"><span class="kd">func</span> <span class="nf">Format</span><span class="p">(</span><span class="nx">a</span> <span class="o">*</span><a href="#Archive"><span class="nx">Archive</span></a><span class="p">)</span> <span class="p">[]</span><a href="https://pkg.go.dev/builtin#byte"><span class="kt">byte</span></a></pre>
    <p>Format returns the serialized form of an Archive.
It is assumed that the Archive data structure is well-formed:
a.Comment and all a.File[i].Data contain no file marker lines,
and all a.File[i].Name is non-empty.
<h3 id="pkg-types">Types</h3>
  <h3 id="Archive">type Archive</h3>
    <pre class="chroma"><span class="kd">type</span> <span class="nx">Archive</span> <span class="kd">struct</span> <span class="p">{</span>
	<span id="Archive.Comment"><span class="nx">Comment</span></span> <span class="p">[]</span><a href="https://pkg.go.dev/builtin#byte"><span class="kt">byte</span></a>
	<span id="Archive.Files"><span class="nx">Files</span></span>   <span class="p">[]</span><a href="#File"><span class="nx">File</span></a>
<span class="p">}</span></pre>
    <p>An Archive is a collection of files.
<h4 id="FromDir">func FromDir</h4>
  <pre class="chroma"><span class="kd">func</span> <span class="nf">FromDir</span><span class="p">(</span><span class="nx">dir</span> <a href="https://pkg.go.dev/builtin#string"><span class="kt">string</span></a><span class="p">)</span> <span class="p">(</span><span class="o">*</span><a href="#Archive"><span class="nx">Archive</span></a><span class="p">,</span> <a href="https://pkg.go.dev/builtin#error"><span class="kt">error</span></a><span class="p">)</span></pre>
  <p>FromDir constructs an archive from contents of dir.
<h4 id="Parse">func Parse</h4>
  <pre class="chroma"><span class="kd">func</span> <span class="nf">Parse</span><span class="p">(</span><span class="nx">data</span> <span class="p">[]</span><a href="https://pkg.go.dev/builtin#byte"><span class="kt">byte</span></a><span class="p">)</span> <span class="o">*</span><a href="#Archive"><span class="nx">Archive</span></a></pre>
  <p>Parse parses the serialized form of an Archive.
The returned Archive holds slices of data.
<h4 id="ParseFile">func ParseFile</h4>
  <pre class="chroma"><span class="kd">func</span> <span class="nf">ParseFile</span><span class="p">(</span><span class="nx">file</span> <a href="https://pkg.go.dev/builtin#string"><span class="kt">string</span></a><span class="p">)</span> <span class="p">(</span><span class="o">*</span><a href="#Archive"><span class="nx">Archive</span></a><span class="p">,</span> <a href="https://pkg.go.dev/builtin#error"><span class="kt">error</span></a><span class="p">)</span></pre>
  <p>ParseFile parses the named file as an archive.
<h3 id="File">type File</h3>
    <pre class="chroma"><span class="kd">type</span> <span class="nx">File</span> <span class="kd">struct</span> <span class="p">{</span>
	<span id="File.Name"><span class="nx">Name</span></span> <a href="https://pkg.go.dev/builtin#string"><span class="kt">string</span></a> <span class="c1">// name of file (&#34;foo/bar.txt&#34;)
</span><span class="c1"></span>	<span id="File.Data"><span class="nx">Data</span></span> <span class="p">[]</span><a href="https://pkg.go.dev/builtin#byte"><span class="kt">byte</span></a> <span class="c1">// text content of file
</span><span class="c1"></span><span class="p">}</span></pre>
    <p>A File is a single file in an archive.
</main>
    <hr>
    <footer>
      <small id="generated-by-footer">
        Generated with <a href="https://abhinav.github.io/doc2go/">doc2go</a>
      </small>
    </footer>
    <script src="../../../../_/js/permalink.js"></script></body>
</html>
